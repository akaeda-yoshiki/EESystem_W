<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>入退室データ</title>
    <link rel="stylesheet" type="text/css" href="header.css">
    <script type="text/javascript" src="header.js"> </script>
    <script src="https://code.jquery.com/jquery-1.9.0.min.js"></script>

    <script>
        $(document).ready(function () {
            $.ajax({
                type: "POST",
                url: "http://192.168.0.159/2018grade4/kaihatu_zemi/akaeda/EESystem_S/read.php",
                dataType: "json",
            }).done(function (data, dataType) {
                // successのブロック内は、Ajax通信が成功した場合に呼び出される

                // 結果が0件の場合
                if (data == null) alert('データが0件でした');
                var tbody = document.createElement('tbody');
                var th = document.createElement('th');
                th.appendChild(document.createTextNode("氏名"));
                var th1 = document.createElement('th');
                th1.appendChild(document.createTextNode("ID"));
                var th2 = document.createElement('th');
                th2.appendChild(document.createTextNode("学年"));
                var tr = document.createElement('tr');
                tr.appendChild(th);
                tr.appendChild(th1);
                tr.appendChild(th2);
                tbody.appendChild(tr);
                for (var i = 0; i < data.length; i++) {
            
                    var td = document.createElement('td');
                    td.appendChild(document.createTextNode(data[i].name));
                    // td.innerHTML = "<a href='" + url + "?input_id=" + read_data[i].id + "'class='square_btn'>削除</a>"
                    var td1 = document.createElement('td');
                    td1.appendChild(document.createTextNode(data[i].id));
                    var td2 = document.createElement('td');
                    td2.appendChild(document.createTextNode(data[i].grade));
                    
                    // var but = document.createElement('BUTTON')
                    // $sampleButton.textContent = "サンプル";
                    // td.appendChild(but)
                    var tr = document.createElement('tr');
                    // tr.appendChild(th)
                    tr.appendChild(td);
                    tr.appendChild(td1);
                    tr.appendChild(td2);

                    //tbodyが必要
                    
                    tbody.appendChild(tr);
                }
                var table = document.createElement('table');
                table.appendChild(tbody);
                //bodyに追加
                document.getElementsByTagName('body')[0].appendChild(table);
            }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
                    alert('Error : ' + errorThrown);
                });
        });
    </script>

</head>

<body>
    <script type="text/javascript">
        write_header(3);
    </script>

    <br>
    <b id=read></b>
</body>

</html>